<?xml version="1.0" encoding="UTF-8" ?>
<!-- SQL 맵퍼 파일은 xml이기 때문에 제일 먼저 xml 선언이 옵니다. -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Applys">
 	<insert id="insert" parameterType="apply">
	insert into apply
	(AP_INDEX,AP_ID,AP_RDATE,AP_CINDEX,AP_TITLE,AP_LOCATE,AP_CDATE)
	select
		APPLY_SEQ.nextval as AP_INDEX, 
		#{AP_ID },  
		sysdate as AP_RDATE, 
		ONE_INDEX as AP_CINDEX, 
		ONE_TITLE AS AP_TITLE, 
		ONE_LOCATE as AP_LOCATE, 
		ONE_RDATE AS AP_CDATE
	from ONEDAY
	where ONE_INDEX = #{AP_CINDEX}
	</insert>  

	<select id="idcheck" resultType="apply">
	select * from apply where AP_ID = #{AP_ID} and AP_CINDEX = #{AP_CINDEX}
	</select>
	
	<select id="count" resultType="int">
		select count(*) from apply where AP_CINDEX = #{num}
	</select>
</mapper>